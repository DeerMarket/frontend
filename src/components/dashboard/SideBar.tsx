import { Flex } from "theme-ui";
import Link from "next/link";
import Router from "next/router";
import { useAction } from "../../hooks/useAction";
import { useData } from "../../hooks/useData";

export default function SideBar({ tab, ...rest }: any) {
  const { logout } = useAction();
  const { account } = useData();

  async function handleLogout(e: any) {
    e.preventDefault();
    await logout();
    Router.push("/");
  }

  const links = [
    {
      name: "Overview",
      href: "/dashboard",
      active: tab === "overview",
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 19.5 19.5"
          width={28}
          height={28}
        >
          <path
            fill="inherit"
            d="m19 4.45-.05-.17C18.38 2.32 16.73.85 14.7.47c-3.27-.63-6.63-.63-9.9 0C2.77.85 1.12 2.32.55 4.28l-.05.17a12.65 12.65 0 0 0 0 7.06l.05.17c.57 1.96 2.22 3.43 4.25 3.81 1.39.26 2.8.41 4.2.45V18H7.11c-.41 0-.75.34-.75.75s.34.75.75.75h5.27c.41 0 .75-.34.75-.75s-.34-.75-.75-.75h-1.89v-2.06c1.41-.04 2.82-.18 4.2-.45 2.03-.39 3.68-1.85 4.25-3.81l.05-.17c.67-2.31.67-4.75 0-7.06Zm-1.49 6.81c-.41 1.4-1.59 2.47-3.08 2.76-3.09.59-6.26.59-9.35 0-1.49-.28-2.68-1.36-3.08-2.76l-.05-.17c-.59-2.04-.59-4.19 0-6.23L2 4.69c.41-1.4 1.59-2.47 3.08-2.76 3.09-.59 6.26-.59 9.35 0 1.49.28 2.68 1.36 3.08 2.76l.05.17c.59 2.04.59 4.19 0 6.23l-.05.17Z"
          />
          <path d="m13.29 6.91-2.06 1.62c-.07.05-.14.11-.2.16-.05-.06-.1-.13-.15-.2L9.83 7.11c-.35-.46-.62-.82-1.14-.89-.52-.06-.88.22-1.33.57L5.3 8.41c-.33.26-.38.73-.13 1.05s.73.38 1.05.13l2.06-1.62c.07-.05.14-.11.2-.15.05.06.1.13.15.2L9.68 9.4c.35.46.62.82 1.15.89h.15c.44 0 .77-.26 1.18-.58l2.06-1.62c.33-.26.38-.73.13-1.05s-.73-.38-1.05-.13Z" />
        </svg>
      ),
    },
    {
      name: "Orders",
      href: "/dashboard/orders",
      active: tab === "orders",
      icon: (
        <svg viewBox="0 0 19.5 19.5" width={28} height={28}>
          <path
            fill="inherit"
            d="M7.66 5.58 6.11 7.13l-.51-.51a.754.754 0 0 0-1.06 0c-.29.29-.29.77 0 1.06l1.04 1.04c.29.29.77.29 1.06 0l2.08-2.08c.29-.29.29-.77 0-1.06a.754.754 0 0 0-1.06 0ZM14.43 6.92h-3.64c-.41 0-.75.34-.75.75s.34.75.75.75h3.64c.41 0 .75-.34.75-.75s-.34-.75-.75-.75ZM5.58 13.92c.29.29.77.29 1.06 0l-.53-.53-.53.53Z"
          />
          <path
            fill="inherit"
            d="m7.66 10.78-1.55 1.55-.51-.51a.754.754 0 0 0-1.06 0c-.29.29-.29.77 0 1.06l1.04 1.04.53-.53.53.53 2.08-2.08c.29-.29.29-.77 0-1.06s-.77-.29-1.06 0ZM14.43 12.12h-3.64c-.41 0-.75.34-.75.75s.34.75.75.75h3.64c.41 0 .75-.34.75-.75s-.34-.75-.75-.75Z"
          />
          <path
            fill="inherit"
            d="M19.13 6.53A8.28 8.28 0 0 0 12.97.37a14.29 14.29 0 0 0-6.44 0c-3.06.72-5.44 3.1-6.16 6.16a14.29 14.29 0 0 0 0 6.44 8.28 8.28 0 0 0 6.16 6.16c2.12.5 4.32.5 6.44 0a8.28 8.28 0 0 0 6.16-6.16c.5-2.12.5-4.32 0-6.44Zm-6.5 11.14c-1.89.44-3.86.44-5.76 0a6.776 6.776 0 0 1-5.04-5.04c-.44-1.89-.44-3.86 0-5.76.59-2.5 2.54-4.45 5.04-5.04 1.89-.44 3.86-.44 5.76 0 2.5.59 4.45 2.54 5.04 5.04.44 1.89.44 3.86 0 5.76a6.776 6.776 0 0 1-5.04 5.04Z"
          />
        </svg>
      ),
    },
    {
      name: "Stores",
      href: "/dashboard/stores",
      active: tab === "stores",
      icon: (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 19.5 19.5"
          width={28}
          height={28}
        >
          <path
            d="M19.09 8.48 19 8.15c-.6-2.11-2.3-3.72-4.42-4.27a4.818 4.818 0 0 0-3.5-3.71c-.87-.23-1.78-.23-2.64 0a4.818 4.818 0 0 0-3.5 3.71C2.82 4.43 1.12 6.04.52 8.15l-.09.33c-.55 1.92-.54 3.96 0 5.88a6.744 6.744 0 0 0 5.2 4.75c2.73.53 5.54.53 8.27 0 2.5-.48 4.51-2.32 5.2-4.75.55-1.92.55-3.96 0-5.88ZM8.81 1.62c.61-.16 1.26-.16 1.88 0 1.03.27 1.83 1 2.22 1.92-2.09-.38-4.23-.38-6.32 0 .39-.92 1.19-1.65 2.22-1.92ZM5.59 5.25l1.07-.21c2.04-.39 4.13-.39 6.17 0l1.07.21c1.65.32 2.98 1.47 3.54 3.01-.97.34-1.95.6-2.95.81v-.82c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.08c-2.16.3-4.34.3-6.5 0V8.25c0-.41-.34-.75-.75-.75s-.75.34-.75.75v.82a23.9 23.9 0 0 1-2.95-.81 4.707 4.707 0 0 1 3.54-3.01Zm8.01 12.38c-2.54.49-5.16.49-7.7 0a5.222 5.222 0 0 1-4.04-3.68 9.31 9.31 0 0 1-.18-4.23c1.09.38 2.2.68 3.32.89v1.14c0 .41.34.75.75.75s.75-.34.75-.75v-.9c2.16.28 4.34.28 6.5 0v.9c0 .41.34.75.75.75s.75-.34.75-.75v-1.14c1.12-.22 2.23-.52 3.32-.89.26 1.4.22 2.85-.18 4.23a5.222 5.222 0 0 1-4.04 3.68Z"
            fill="inherit"
          />
        </svg>
      ),
    },
  ];
  return (
    <Flex
      sx={{
        mb: "auto",
        overflow: "hidden",
        minWidth: "100px",
        alignItems: "center",
        variant: "box.dashboardCard",
        flexDirection: ["row", "row", "column"],
        width: ["100%", "100%", "100px"],
        height: ["100px", "100px", "calc(100vh - 240px)"],
        minHeight: ["100px", "100px", "498px"],
      }}
      {...rest}
    >
      {links.map((link) => {
        return (
          <Link href={`${link.href}`} key={link.href}>
            <a
              sx={{
                width: "100%",
                py: 4,
                display: "flex",
                flexDirection: "column",
                alignItems: "center",
                justifyContent: "center",
                gap: 2,
                cursor: "pointer",

                transition: "all 0.2s ease",

                bg: link.active ? "primary" : "none",
                color: link.active ? "white" : "primary",
                fill: link.active ? "white" : "primary",

                "&:hover": {
                  bg: !link.active && "primary",
                  fill: !link.active && "white",
                  color: !link.active && "white",
                },
              }}
            >
              {link.icon}
              <span
                sx={{
                  color: "inherit",
                  textAlign: "center",
                }}
              >
                {link.name}
              </span>
            </a>
          </Link>
        );
      })}
      {account !== null && (
        <a
          sx={{
            width: "100%",
            py: 4,
            display: "flex",
            flexDirection: "column",
            alignItems: "center",
            justifyContent: "center",
            gap: 2,
            cursor: "pointer",
            fill: "primary",
            color: "primary",
            transition: "all 0.2s ease",
            mt: [0, 0, "auto"],

            "&:hover": {
              bg: "primary",
              fill: "white",
              color: "white",
            },
          }}
          onClick={handleLogout}
        >
          <svg
            width={28}
            height={28}
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M5.07692 5.92648C5.07692 4.38908 6.33971 3.14278 7.89744 3.14278H12C12.4248 3.14278 12.7692 3.48268 12.7692 3.90197C12.7692 4.32126 12.4248 4.66116 12 4.66116H7.89744C7.18938 4.66116 6.61539 5.22766 6.61539 5.92648V6.93873C6.61539 7.35802 6.27099 7.69792 5.84615 7.69792C5.42132 7.69792 5.07692 7.35802 5.07692 6.93873V5.92648ZM5.84615 16.3021C6.27099 16.3021 6.61539 16.642 6.61539 17.0613V18.0735C6.61539 18.7723 7.18938 19.3388 7.89744 19.3388H12C12.4248 19.3388 12.7692 19.6788 12.7692 20.098C12.7692 20.5173 12.4248 20.8572 12 20.8572H7.89744C6.33971 20.8572 5.07692 19.6109 5.07692 18.0735V17.0613C5.07692 16.642 5.42132 16.3021 5.84615 16.3021Z"
              fill="inherit"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M12.7692 4.78618C12.7692 3.90491 13.6592 3.29355 14.4966 3.59962L19.6248 5.47416C20.1277 5.658 20.4615 6.13139 20.4615 6.66071V17.3393C20.4615 17.8686 20.1277 18.342 19.6248 18.5258L14.4966 20.4004C13.6592 20.7065 12.7692 20.0951 12.7692 19.2138V4.78618ZM15.0309 2.17576C13.1887 1.5024 11.2308 2.84738 11.2308 4.78618V19.2138C11.2308 21.1526 13.1887 22.4976 15.0309 21.8242L20.1591 19.9497C21.2656 19.5452 22 18.5038 22 17.3393V6.66071C22 5.4962 21.2656 4.45475 20.1591 4.0503L15.0309 2.17576Z"
              fill="inherit"
            />
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M5.36444 9.43867C5.06404 9.14218 4.57699 9.14218 4.27658 9.43867L2.2253 11.4632C1.9249 11.7597 1.9249 12.2403 2.2253 12.5368L4.27658 14.5613C4.57699 14.8578 5.06404 14.8578 5.36444 14.5613C5.66484 14.2649 5.66484 13.7842 5.36444 13.4877L4.62632 12.7592H8.92308C9.34791 12.7592 9.69231 12.4193 9.69231 12C9.69231 11.5807 9.34791 11.2408 8.92308 11.2408H4.62632L5.36444 10.5123C5.66484 10.2158 5.66484 9.73515 5.36444 9.43867Z"
              fill="inherit"
            />
          </svg>
          <span
            sx={{
              color: "inherit",
              textAlign: "center",
            }}
          >
            Logout
          </span>
        </a>
      )}
    </Flex>
  );
}
